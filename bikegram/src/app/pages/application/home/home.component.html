<app-header></app-header>

<article class="container ">

  <div class="content-post">

    <div class="userTools">
      <button type="button" routerLink="new-post" class="newPost__btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="new__post-icon"><path d="M50 40c-8.285 0-15 6.718-15 15 0 8.285 6.715 15 15 15 8.283 0 15-6.715 15-15 0-8.282-6.717-15-15-15zm40-15H78c-1.65 0-3.428-1.28-3.949-2.846l-3.102-9.309C70.426 11.28 68.65 10 67 10H33c-1.65 0-3.428 1.28-3.949 2.846l-3.102 9.309C25.426 23.72 23.65 25 22 25H10C4.5 25 0 29.5 0 35v45c0 5.5 4.5 10 10 10h80c5.5 0 10-4.5 10-10V35c0-5.5-4.5-10-10-10zM50 80c-13.807 0-25-11.193-25-25 0-13.806 11.193-25 25-25 13.805 0 25 11.194 25 25 0 13.807-11.195 25-25 25zm36.5-38.007a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"/></svg>
      </button>
      <button type="button" routerLink="new-route" class="newRoute__btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" class="new__route-icon"><path d="M35.493 24h2a1 1 0 1 0 0-2h-2a1 1 0 1 0 0 2zM31.995 31a3.517 3.517 0 0 1-1.252-.23 1.004 1.004 0 0 0-1.291.578 1.002 1.002 0 0 0 .578 1.291c.626.238 1.285.36 1.963.361h.357a1 1 0 1 0 0-2h-.355zM29.621 24.676a1 1 0 0 0 .528-.151 3.451 3.451 0 0 1 1.454-.503 1.001 1.001 0 0 0-.219-1.989 5.423 5.423 0 0 0-2.294.794 1 1 0 0 0 .531 1.849zM35.993 40c-.086 0-.171.002-.256.006a1 1 0 0 0 .04 1.999l.042-.001L37.778 42a1 1 0 1 0 0-2h-1.785zM43.493 24a1 1 0 1 0 0-2h-2a1 1 0 1 0 0 2h2zM47.778 40a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2zM51.351 32a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1zM41.778 42h2a1 1 0 1 0 0-2h-2a1 1 0 1 0 0 2zM45.351 32a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1zM36.351 31a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2zM24.064 58h-2a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM18.064 58h-2a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM52.604 54.517a1 1 0 0 0-1.195.756 3.47 3.47 0 0 1-.663 1.392 1 1 0 1 0 1.572 1.236 5.51 5.51 0 0 0 1.042-2.188 1 1 0 0 0-.756-1.196zM51.531 52.719a1 1 0 0 0 .785-1.618 5.543 5.543 0 0 0-1.879-1.528 1 1 0 1 0-.891 1.791c.463.229.877.566 1.197.974.198.25.491.381.788.381zM47.065 50a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1zM47.993 58h-1.93a1 1 0 1 0 0 2l1.971-.001.029-1v1c.553 0 .965-.447.965-1 0-.552-.482-.999-1.035-.999zM59.426 35.632a1 1 0 1 0-1.975.317 3.502 3.502 0 0 1-.1 1.54 1 1 0 1 0 1.92.562 5.51 5.51 0 0 0 .155-2.419zM28.029 29.855c.524-.173.81-.738.638-1.263a3.494 3.494 0 0 1-.146-1.537 1 1 0 0 0-.867-1.117.995.995 0 0 0-1.117.867 5.504 5.504 0 0 0 .229 2.412 1.001 1.001 0 0 0 1.263.638zM56.746 31.738a5.438 5.438 0 0 0-2.317-.722 1 1 0 1 0-.156 1.994 3.443 3.443 0 0 1 1.47.458 1 1 0 0 0 1.003-1.73zM55.345 39.729c-.429.18-.883.271-1.352.271h-.215a1 1 0 1 0 0 2h.215a5.46 5.46 0 0 0 2.125-.427 1 1 0 1 0-.773-1.844zM32.555 44.839c.099-.514.307-.989.619-1.413a1 1 0 0 0-1.611-1.185 5.48 5.48 0 0 0-.973 2.222 1.001 1.001 0 0 0 1.965.376zM34.122 50.594a1 1 0 0 0 .417-1.909 3.538 3.538 0 0 1-1.228-.936 1 1 0 1 0-1.531 1.287 5.538 5.538 0 0 0 1.927 1.467c.135.061.276.091.415.091zM30.064 58h-2a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM36.064 58h-2a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM41.065 50a1 1 0 0 0-1-1h-2a1 1 0 1 0 0 2h2a1 1 0 0 0 1-1zM42.064 58h-2a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2zM21.021 28.977C18.75 26.412 15.722 25 12.493 25s-6.257 1.412-8.527 3.977c-4.612 5.211-4.612 13.688 0 18.899l8.527 9.633 8.527-9.633c4.613-5.211 4.613-13.688.001-18.899zM12.493 43c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM48.747 24.507l6.464-7.286c3.478-3.92 3.478-10.296 0-14.216C53.491 1.067 51.195 0 48.746 0c-2.448 0-4.744 1.067-6.464 3.005-3.477 3.92-3.477 10.296 0 14.216l6.465 7.286zM48.993 4c3.032 0 5.5 2.468 5.5 5.5s-2.468 5.5-5.5 5.5-5.5-2.468-5.5-5.5 2.468-5.5 5.5-5.5z" fill="#fff"/></svg></button>
      <button type="button" routerLink="new-sale" class="newSale__btn"><svg viewBox="0 0 511 512" xmlns="http://www.w3.org/2000/svg" class="new__sale-icon"><path d="M235.793 347.266a10.013 10.013 0 0 0 0-14.149c-3.906-3.898-10.234-3.898-14.145 0-3.898 3.91-3.898 10.238 0 14.149 3.91 3.898 10.239 3.898 14.145 0zm0 0M188.45 109.969c0 60.636 49.331 109.972 109.968 109.972s109.969-49.336 109.969-109.972S359.055 0 298.418 0 188.449 49.332 188.449 109.969zm199.945 0c0 49.613-40.364 89.976-89.977 89.976s-89.977-40.363-89.977-89.976c0-49.61 40.364-89.973 89.977-89.973s89.977 40.363 89.977 89.973zm0 0"/><path d="M115.652 509.043c3.875 3.906 10.184 3.95 14.11.082l48.468-47.75c8.235-8.234 10.739-20.426 7.118-31.023l10.425-10.055a29.814 29.814 0 0 1 20.817-8.41h132.902c23.578 0 45.863-9.055 62.758-25.496.695-.676-5.277 6.359 90.668-108.313 14.23-16.836 12.102-42.117-4.75-56.363-16.746-14.113-41.832-12.086-56.102 4.46l-58.992 60.634c-7.449-9.168-18.808-14.883-31.082-14.883h-111.48c-15.864-6.637-32.696-9.996-50.063-9.996-48.14 0-90.176 22.234-112.734 63.922-9.504-1.801-19.528 1.074-26.738 8.285L3.418 381.836c-3.883 3.894-3.89 10.195-.016 14.102zm74.793-227.121c15.313 0 30.118 3.082 44.012 9.16a9.979 9.979 0 0 0 4.008.84h113.527c10.84 0 19.996 8.84 19.996 19.992 0 11.027-8.968 19.996-19.996 19.996h-81.566c-5.52 0-9.996 4.477-9.996 9.996 0 5.524 4.476 9.996 9.996 9.996h81.566c22.051 0 39.988-17.937 39.988-39.988 0-1.758-.125-3.5-.351-5.227 57.066-58.66 65.113-66.902 65.457-67.312 7.125-8.41 19.773-9.477 28.187-2.383 8.422 7.121 9.489 19.762 2.344 28.219L397.95 372.406c-13.094 12.57-30.285 19.489-48.457 19.489H216.59c-13.024 0-25.352 4.98-34.703 14.015l-8.496 8.2-78.32-78.317c18.304-34.34 52.652-53.871 95.374-53.871zm-125.32 66.344c3.297-3.297 8.36-3.891 12.379-1.407 1.73 1.055-3.238-3.468 86.59 86.235 3.996 3.996 3.781 10.363.054 14.09l-41.32 40.707-98.23-98.98zm0 0M286.422 49.988v11.715c-11.637 4.125-19.996 15.238-19.996 28.274 0 16.535 13.453 29.992 29.992 29.992 5.512 0 9.996 4.484 9.996 9.996 0 5.512-4.484 9.996-9.996 9.996-4.27 0-8.883-2.684-12.98-7.563-3.555-4.226-9.86-4.77-14.086-1.218-4.227 3.554-4.774 9.86-1.22 14.086 5.345 6.355 11.63 10.785 18.29 13.02v11.667c0 5.524 4.476 9.996 9.996 9.996s9.996-4.472 9.996-9.996v-11.715c11.637-4.129 19.996-15.242 19.996-28.273 0-16.54-13.453-29.992-29.992-29.992-5.512 0-9.996-4.485-9.996-9.996 0-5.512 4.484-10 9.996-10 3.543 0 7.281 1.808 10.812 5.226 3.97 3.84 10.297 3.734 14.137-.23 3.84-3.97 3.735-10.297-.23-14.137-5.075-4.91-10.153-7.688-14.723-9.203V49.988c0-5.523-4.477-10-9.996-10s-9.996 4.477-9.996 10zm0 0" fill="#fff"/></svg></button>
      <!--<button type="button" (click)="setSaleFormStatus(true)" class="newSale__btn">+ Sale</button>-->

    </div>

    <div class="post__form" [ngClass]="{'post__form-open': postFormOpen }">

      <mat-card>
        <h2>New Post</h2>
        <form>
          <label for="image">
            <input class="custom-file-input" type="file">
          </label>
          <mat-form-field>
            <textarea matInput placeholder="Enter your post content"></textarea>
          </mat-form-field>

          <div class="post__form-btn">
            <button (click)=createPost() mat-raised-button color="primary">Create Post</button>
            <button (click)="setPostFormStatus(false)" mat-raised-button color="warn">Close</button>
          </div>
        </form>
      </mat-card>

    </div>

    <div class="route__form" [ngClass]="{'route__form-open': routeFormOpen }">
      <mat-card>
        <h2>New Route</h2>
        <form>
          <mat-form-field>
            <input type="text" matInput placeholder="Start">
          </mat-form-field>
          <mat-form-field>
            <input type="text" matInput placeholder="End">
          </mat-form-field>

          <div class="route___form-map">
            <iframe
              src="https://maps.google.com/maps?width=100%&amp;height=600&amp;hl=en&amp;q=Madrid+(Javier%20Sanchez)&amp;ie=UTF8&amp;t=&amp;z=18&amp;iwloc=B&amp;output=embed"
              width="100%" height="228" frameborder="0" style="border:0" allowfullscreen></iframe>
          </div>
          <mat-form-field>
            <textarea matInput placeholder="Enter route description"></textarea>
          </mat-form-field>
          <div class="route__form-btn">
            <button (click)=createRoute() mat-raised-button color="primary">Create Route</button>
            <button (click)="setRouterFormStatus(false)" mat-raised-button color="warn">Close</button>
          </div>
        </form>
      </mat-card>
    </div>

    <div class="sale__form" [ngClass]="{'sale__form-open': saleFormOpen }">

      <mat-card>
        <h2>New Sale</h2>
        <form>

          <label for="image">
            <input class="custom-file-input" type="file">
          </label>

          <mat-form-field>
            <input type="text" matInput placeholder="Brand & Model">
          </mat-form-field>

          <mat-form-field>
            <input type="number" matInput placeholder="Kilometers">
          </mat-form-field>

          <mat-form-field>
            <input type="number" matInput placeholder="Price in â‚¬">
          </mat-form-field>

          <mat-form-field>
            <textarea matInput placeholder="Sale description"></textarea>
          </mat-form-field>

          <div class="sale__form-btn">
            <button type="button" (click)=createSale() mat-raised-button color="primary">Create Sale</button>
            <button mat-raised-button (click)="setSaleFormStatus(false)" type="button" color="warn">Close</button>
          </div>
        </form>
      </mat-card>
    </div>

    <mat-card class="post-card" *ngFor="let post of posts">
      <mat-card-header>
        <div mat-card-avatar class="header-image"></div>
        <mat-card-title>{{post.name}}</mat-card-title>
        <mat-card-subtitle>{{post.location}}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image [src]="post.image">
      <mat-card-content>
        <p>
          {{post.text}}
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button color="primary"><a routerLink="/post/{{post.id}}">More Info</a></button>
        <button mat-button (click)="editPost(post._id)">Edit</button>
        <button mat-button (click)="deletePost($event, post._id)" color="warn">Delete</button>
      </mat-card-actions>
    </mat-card>


    <mat-card class="route-card" *ngFor=" let route of routes">
      <mat-card-header>
        <div mat-card-avatar class="header-image"></div>
        <mat-card-title>{{route.name}}</mat-card-title>
        <mat-card-subtitle>{{route.location}}</mat-card-subtitle>

      </mat-card-header>
      <div class="route-card__map">
        <agm-map [latitude]="lat" [longitude]="lng">
          <agm-direction [origin]="origin" [destination]="destination">
          </agm-direction>
        </agm-map>
      </div>
      <mat-card-content>
        <p>
          {{route.description}}
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button color="primary"><a routerLink="/route/{{route.id}}">More Info</a></button>
        <button mat-button (click)="editRoute(route._id)">Edit</button>
        <button mat-button color="warn" (click)="deleteRoute($event, route._id)">Delete</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="sale-card" *ngFor="let sale of sales">
      <mat-card-header>
        <div mat-card-avatar class="header-image"></div>
        <mat-card-title><a routerLink="/profile">{{sale.name}}</a></mat-card-title>
        <mat-card-subtitle>{{sale.location}}</mat-card-subtitle>
      </mat-card-header>

      <img mat-card-image [src]="sale.image">
      <mat-card-content>
        <p>{{sale.brand}}</p>
        <p>{{sale.kilometers}} km</p>
        <p>Precio:{{sale.price}} â‚¬</p>
        <p>
          {{sale.text}}
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button color="primary"><a routerLink="/sale/{{sale.id}}">More Info</a></button>
        <button mat-button (click)="editSale(sale._id)">Edit</button>
        <button mat-button color="warn" (click)="deleteSale($event, sale._id)">Delete</button>
      </mat-card-actions>
    </mat-card>

  </div>

</article>