<app-header></app-header>

<article class="container ">

  <div class="content-post">

    <div class="userTools">
      <button type="button" routerLink="new-post" class="newPost__btn"><svg xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 100 100" class="new__post-icon">
          <path
            d="M50 40c-8.285 0-15 6.718-15 15 0 8.285 6.715 15 15 15 8.283 0 15-6.715 15-15 0-8.282-6.717-15-15-15zm40-15H78c-1.65 0-3.428-1.28-3.949-2.846l-3.102-9.309C70.426 11.28 68.65 10 67 10H33c-1.65 0-3.428 1.28-3.949 2.846l-3.102 9.309C25.426 23.72 23.65 25 22 25H10C4.5 25 0 29.5 0 35v45c0 5.5 4.5 10 10 10h80c5.5 0 10-4.5 10-10V35c0-5.5-4.5-10-10-10zM50 80c-13.807 0-25-11.193-25-25 0-13.806 11.193-25 25-25 13.805 0 25 11.194 25 25 0 13.807-11.195 25-25 25zm36.5-38.007a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z" />
          </svg>
      </button>
      <button type="button" routerLink="new-route" class="newRoute__btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="new__route-icon">
        <path d="M256 0C153.755 0 70.573 83.182 70.573 185.426c0 126.888 165.939 313.167 173.004 321.035 6.636 7.391 18.222 7.378 24.846 0 7.065-7.868 173.004-194.147 173.004-321.035C441.425 83.182 358.244 0 256 0zm0 278.719c-51.442 0-93.292-41.851-93.292-93.293S204.559 92.134 256 92.134s93.291 41.851 93.291 93.293-41.85 93.292-93.291 93.292z"/></svg></button>
      <button type="button" routerLink="new-sale" class="newSale__btn"><svg class="new__sale-icon" width="28" height="22" viewBox="0 0 287 225" xmlns="http://www.w3.org/2000/svg"><path d="M77.41 218.531l-70.957-71.07c-8.604-8.626-8.604-22.627 0-31.252l106.79-106.99c5.952-6.026 14.085-9.334 22.571-9.216l63.944.886c13.084.177 23.633 10.752 23.81 23.868v.177c2.946 1.063 5.952 2.186 8.958 3.426 16.325 6.794 30.705 15.951 40.606 25.876l.53.532c15.971 16.305 14.203 28.712 11.728 34.62-2.475 5.966-10.019 15.95-32.768 16.069-9.193.059-19.625-1.536-30.35-4.55a31.338 31.338 0 0 1-6.955 10.635L108.587 218.53c-8.605 8.625-22.572 8.625-31.177 0zm82.273-180.246c-7.131 7.149-7.131 18.728-.06 25.817 7.132 7.149 18.683 7.149 25.814 0 .236-.295.53-.59.766-.886 7.25 5.376 16.207 10.339 25.755 14.356 32.65 13.647 54.16 9.393 56.164 4.608.648-1.536-.177-6.558-7.838-14.415l-.354-.354c-8.074-8.094-20.627-16.01-34.594-21.86-.53-.235-1.002-.413-1.533-.649l.354 25.758c-2.947-1.004-6.011-2.186-9.194-3.486-8.958-3.722-17.326-8.33-24.34-13.292a18.24 18.24 0 0 0-5.127-15.597c-7.131-7.148-18.682-7.148-25.813 0zM104 163c20.435 0 37-16.565 37-37s-16.565-37-37-37-37 16.565-37 37 16.565 37 37 37zm-4.6-57.48h11.2v14.64h14.64v11.2H110.6V146H99.4v-14.64H84.76v-11.2H99.4v-14.64z" fill="#fff" fill-rule="nonzero"/></svg></button>

    </div>

    <div class="post__form" [ngClass]="{'post__form-open': postFormOpen }">

      <mat-card>
        <h2>New Post</h2>
        <form>
          <label for="image">
            <input class="custom-file-input" type="file">
          </label>
          <mat-form-field>
            <textarea matInput placeholder="Enter your post content"></textarea>
          </mat-form-field>

          <div class="post__form-btn">
            <button (click)=createPost() mat-raised-button color="primary">Create Post</button>
            <button (click)="setPostFormStatus(false)" mat-raised-button color="warn">Close</button>
          </div>
        </form>
      </mat-card>

    </div>

    <div class="route__form" [ngClass]="{'route__form-open': routeFormOpen }">
      <mat-card>
        <h2>New Route</h2>
        <form>
          <mat-form-field>
            <input type="text" matInput placeholder="Start">
          </mat-form-field>
          <mat-form-field>
            <input type="text" matInput placeholder="End">
          </mat-form-field>

          <div class="route___form-map">
            <iframe
              src="https://maps.google.com/maps?width=100%&amp;height=600&amp;hl=en&amp;q=Madrid+(Javier%20Sanchez)&amp;ie=UTF8&amp;t=&amp;z=18&amp;iwloc=B&amp;output=embed"
              width="100%" height="228" frameborder="0" style="border:0" allowfullscreen></iframe>
          </div>
          <mat-form-field>
            <textarea  matInput placeholder="Enter route description"></textarea>
          </mat-form-field>
          <div class="route__form-btn">
            <button (click)=createRoute() mat-raised-button color="primary">Create Route</button>
            <button (click)="setRouterFormStatus(false)" mat-raised-button color="warn">Close</button>
          </div>
        </form>
      </mat-card>
    </div>

    <div class="sale__form" [ngClass]="{'sale__form-open': saleFormOpen }">

      <mat-card>
        <h2>New Sale</h2>
        <form>

          <label for="image">
            <input class="custom-file-input" type="file">
          </label>

          <mat-form-field>
            <input type="text" matInput placeholder="Brand & Model">
          </mat-form-field>

          <mat-form-field>
            <input type="number" matInput placeholder="Kilometers">
          </mat-form-field>

          <mat-form-field>
            <input type="number" matInput placeholder="Price in €">
          </mat-form-field>

          <mat-form-field>
            <textarea matInput placeholder="Sale description"></textarea>
          </mat-form-field>

          <div class="sale__form-btn">
            <button type="button" (click)=createSale() mat-raised-button color="primary">Create Sale</button>
            <button mat-raised-button (click)="setSaleFormStatus(false)" type="button" color="warn">Close</button>
          </div>
        </form>
      </mat-card>
    </div>

    

    <mat-card class="sale-card" *ngFor="let sale of sales">
      <mat-card-header>
        <div mat-card-avatar class="header-image"></div>
        <mat-card-title><a routerLink="/profile">Javier Sánchez</a></mat-card-title>
        <mat-card-subtitle>Madrid - {{sale.createdAt | date:'shortTime'}}</mat-card-subtitle>
      </mat-card-header>

      <img mat-card-image [src]="sale.image">
      <mat-card-content>
        <p>{{sale.brand}}</p>
        <p>{{sale.kilometers}} km</p>
        <p>Precio:{{sale.price}} €</p>
        <p>
          {{sale.text}}
        </p>
      </mat-card-content>
      <mat-card-actions>
       <!-- <button mat-stroked-button color="primary"><a routerLink="/sale/{{sale.id}}">More Info</a></button>-->
        <button mat-button (click)="editSale(sale._id)">Edit</button>
        <button mat-button color="warn" (click)="deleteSale($event, sale._id)">Delete</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="route-card" *ngFor=" let route of routes">
        <mat-card-header>
          <div mat-card-avatar class="header-image"></div>
          <mat-card-title><a routerLink="/profile">Javier Sánchez</a></mat-card-title>
          <mat-card-subtitle>Madrid - {{route.createdAt | date:'shortTime'}}</mat-card-subtitle>
  
        </mat-card-header>
        <div class="route-card__map">
          <agm-map [latitude]="lat" [longitude]="lng">
            <agm-direction [origin]="route.start" [destination]="route.end">
            </agm-direction>
          </agm-map>
        </div>
        <mat-card-content>
          <p class="descriptionRoute">
            {{route.description}}
          </p>
        </mat-card-content>
        <mat-card-actions>
         <!--<button mat-stroked-button color="primary"><a routerLink="/route/{{route.id}}">More Info</a></button>-->
         <!-- <button mat-button (click)="editRoute(route._id)">Edit</button>-->
          <button mat-button color="warn" (click)="deleteRoute($event, route._id)">Delete</button>
        </mat-card-actions>
      </mat-card>

    <mat-card class="post-card" *ngFor="let post of posts">
        <mat-card-header>
          <div mat-card-avatar class="header-image"></div>
          <mat-card-title><a routerLink="/profile">Javier Sánchez</a></mat-card-title>
          <mat-card-subtitle>Madrid - {{post.createdAt | date:'shortTime'}}</mat-card-subtitle>
        </mat-card-header>
        <img mat-card-image [src]="post.image">
        <mat-card-content>
          <p>
            {{post.text}}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <!--<button mat-stroked-button color="primary"><a routerLink="/post/{{post.id}}">More Info</a></button>-->
          <button mat-button (click)="editPost(post._id)">Edit</button>
          <button mat-button (click)="deletePost($event, post._id)" color="warn">Delete</button>
        </mat-card-actions>
      </mat-card>

    <mat-card class="post-card">
      <mat-card-header>
        <div mat-card-avatar>
          <img class="secondUser" src="https://www.pontgrup.com/blog/wp-content/uploads/2018/04/diccionario-motero.jpg"
            width="40px" height="40px">
        </div>
        <mat-card-title>Jose Luis</mat-card-title>
        <mat-card-subtitle>Madrid - 12:01 PM</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image
        src="https://psmfirestorm.blob.core.windows.net/crs-images/244128/16572/original.jpg">
      <mat-card-content>
        <p>
          La salida del Sábado
        </p>
      </mat-card-content>
    </mat-card>

    <mat-card class="route-card">
      <mat-card-header>
        <div mat-card-avatar>
          <img class="secondUser" src="https://www.pontgrup.com/blog/wp-content/uploads/2018/04/diccionario-motero.jpg"
            width="40px" height="40px">
        </div>
        <mat-card-title>Jose Luis</mat-card-title>
        <mat-card-subtitle>Madrid - 11:52 PM</mat-card-subtitle>

      </mat-card-header>
      <div class="route-card__map">
        <agm-map [latitude]="lat" [longitude]="lng">
          <agm-direction [origin]="origin" [destination]="destination">
          </agm-direction>
        </agm-map>
      </div>
      <mat-card-content>
        <p class="description">
          Ruta el Domingo 12 de Mayo hasta Segovia
        </p>
      </mat-card-content>
    </mat-card>
  </div>

</article>